/*C3*/SET SCHEMA PUBLIC
DROP TABLE cliente CASCADE
DROP TABLE agencia CASCADE
DROP TABLE conta_bancaria CASCADE
DROP TABLE movimentacao CASCADE
DROP TABLE funcionario CASCADE
DROP TABLE conexao CASCADE
DROP SEQUENCE seq_agencia IF EXISTS
DROP SEQUENCE seq_conta_bancaria IF EXISTS
CREATE TABLE IF NOT EXISTS cliente (\u000a\u0009CPF VARCHAR(11) NOT NULL,\u000a\u0009nome VARCHAR(250),\u000a\u0009logradouro VARCHAR (250),\u000a\u0009numero VARCHAR (50),\u000a\u0009complemento VARCHAR(250),\u000a\u0009bairro VARCHAR(250),\u000a\u0009cidade VARCHAR(250),\u000a\u0009UF VARCHAR(2),\u000a\u0009cep VARCHAR(8),\u000a\u0009telFixo VARCHAR(10),\u000a\u0009telMovel VARCHAR(10),\u000a\u000a\u0009CONSTRAINT pk_cliente PRIMARY KEY (CPF)\u000a)
CREATE TABLE IF NOT EXISTS agencia (\u000a\u0009codAgencia NUMERIC(4, 0) NOT NULL,\u000a\u0009descricao VARCHAR(250),\u000a\u000a\u0009CONSTRAINT pk_agencia PRIMARY KEY (codAgencia)\u000a)
CREATE TABLE IF NOT EXISTS conta_bancaria (\u000a\u0009numeroConta NUMERIC(9, 0) NOT NULL,\u000a\u0009codAgencia NUMERIC(4, 0) NOT NULL,\u000a\u0009tipoConta NUMERIC(1, 0) NOT NULL,\u000a\u0009CPF VARCHAR(11),\u000a\u0009contaSalario boolean DEFAULT false,\u000a\u0009dataAbertura Date,\u000a\u0009saldo NUMERIC(15, 2) DEFAULT 0,\u000a\u0009senhaNumerica VARCHAR(32),\u000a\u0009senhaAlfabetica VARCHAR(32),\u000a\u000a\u0009CONSTRAINT fk_conta_bancaria_agencia FOREIGN KEY (codAgencia) REFERENCES agencia(codAgencia) ON DELETE CASCADE,\u000a\u0009CONSTRAINT fk_conta_bancaria_cliente FOREIGN KEY (CPF) REFERENCES cliente(CPF) ON DELETE CASCADE,\u000a\u0009CONSTRAINT pk_conta_bancaria PRIMARY KEY (numeroConta, codAgencia, tipoConta)\u000a)
CREATE TABLE IF NOT EXISTS movimentacao (\u000a\u0009numeroConta NUMERIC(9, 0)  NOT NULL,\u000a\u0009codAgencia NUMERIC(4, 0) NOT NULL,\u000a\u0009tipoConta NUMERIC(1, 0) NOT NULL,\u000a\u0009dataHora DateTime NOT NULL,\u000a\u0009valor NUMERIC(15, 2) DEFAULT 0,\u000a\u0009tipoOperacao NUMERIC(1, 0),\u000a\u000a\u0009CONSTRAINT fk_movimentacao_conta_bancaria FOREIGN KEY (codAgencia, numeroConta, tipoConta) REFERENCES conta_bancaria(codAgencia, numeroConta, tipoConta) ON DELETE CASCADE,\u000a\u0009CONSTRAINT pk_movimentacao PRIMARY KEY (numeroConta, codAgencia, tipoConta, dataHora)\u000a)
CREATE TABLE IF NOT EXISTS funcionario (\u000a\u0009nomeUsuario VARCHAR(20) NOT NULL ,\u000a\u0009senha VARCHAR(32),\u000a\u0009tipoUsuario CHAR,\u000a\u000a\u0009CONSTRAINT pk_funcionario PRIMARY KEY (nomeUsuario)\u000a)
CREATE TABLE IF NOT EXISTS conexao (\u000a\u0009nomeUsuario VARCHAR(20) NOT NULL,\u000a\u0009dataHoraInicial DateTime NOT NULL,\u000a\u0009dataHoraFinal DateTime,\u000a\u000a\u0009CONSTRAINT fk_conexao_funcionario FOREIGN KEY (nomeUsuario) REFERENCES funcionario(nomeUsuario) ON DELETE CASCADE,\u000a\u0009CONSTRAINT pk_conexao PRIMARY KEY (nomeUsuario, dataHoraInicial, dataHoraFinal)\u000a)
CREATE SEQUENCE seq_agencia START WITH 1
CREATE SEQUENCE seq_conta_bancaria START WITH 1
INSERT INTO FUNCIONARIO VALUES('Admin_BVB','e10adc3949ba59abbe56e057f20f883e','A')
COMMIT
DISCONNECT
